<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carmen Trainer - ‡∏™‡∏≠‡∏ô‡∏ö‡∏≠‡∏ó</title>
    <style>
        body { font-family: 'Sarabun', sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; background: #f3f4f6; }
        .card { background: white; padding: 30px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        h2 { margin-top: 0; color: #111827; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #374151; }
        
        textarea { width: 100%; height: 150px; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; font-family: inherit; margin-bottom: 20px; resize: vertical; }
        select { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 8px; margin-bottom: 20px; }
        
        button { background: #000; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; transition: 0.2s; }
        button:hover { background: #2563eb; transform: translateY(-1px); }
        button:disabled { background: #9ca3af; cursor: not-allowed; }

        .status { margin-top: 15px; padding: 10px; border-radius: 6px; display: none; text-align: center; font-size: 14px; }
        .success { background: #d1fae5; color: #065f46; }
        .error { background: #fee2e2; color: #991b1b; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>

    <div class="card">
        <h2>üë©‚Äçüè´ ‡∏™‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ Carmen</h2>
        <p style="color:#6b7280; font-size:14px; margin-bottom:20px;">
            ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏°‡∏≠‡∏á (Pinecone) ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÅ‡∏•‡∏∞‡∏ö‡∏≠‡∏ó‡∏à‡∏∞‡∏à‡∏≥‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ
        </p>

        <label>‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÉ‡∏´‡∏°‡πà (Knowledge):</label>
        <textarea id="knowledgeInput" placeholder="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ù‡πà‡∏≤‡∏¢‡πÑ‡∏≠‡∏ó‡∏µ‡∏Ñ‡∏∑‡∏≠ 02-xxx-xxxx ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà‡∏Ñ‡∏∑‡∏≠..."></textarea>

        <label>‡∏™‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÉ‡∏Ñ‡∏£‡∏£‡∏π‡πâ? (Namespace):</label>
        <select id="namespaceInput">
            <option value="">üåê ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô (Global)</option>
            <option value="hotel-seaside">üèñÔ∏è ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Seaside</option>
            <option value="hotel-city">üèôÔ∏è ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ City</option>
        </select>

        <button onclick="sendData()" id="sendBtn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ üíæ</button>
        <div id="statusMsg" class="status"></div>
    </div>

    <script>
        // ‚ö†Ô∏è ‡πÉ‡∏™‡πà Token ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ (‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏ß‡∏£‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å LocalStorage ‡∏´‡∏•‡∏±‡∏á Login)
        const ADMIN_TOKEN = "YOUR_ADMIN_TOKEN_HERE"; 
        const API_URL = "https://carmen-chatbot-api.onrender.com/train";

        async function sendData() {
            const text = document.getElementById('knowledgeInput').value.trim();
            const ns = document.getElementById('namespaceInput').value;
            const btn = document.getElementById('sendBtn');
            const status = document.getElementById('statusMsg');

            if (!text) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏∞!");
                return;
            }

            // UI Loading
            btn.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...";
            btn.disabled = true;
            status.style.display = 'none';

            try {
                const res = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${ADMIN_TOKEN}` // ‡∏™‡πà‡∏á Token ‡πÑ‡∏õ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô
                    },
                    body: JSON.stringify({ text: text, namespace: ns })
                });

                const data = await res.json();

                if (res.ok) {
                    status.className = "status success";
                    status.innerText = "‚úÖ " + data.message;
                    document.getElementById('knowledgeInput').value = ""; // ‡∏•‡πâ‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á
                } else {
                    status.className = "status error";
                    status.innerText = "‚ùå Error: " + (data.detail || "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                }
            } catch (err) {
                status.className = "status error";
                status.innerText = "‚ùå Connection Error: " + err.message;
            } finally {
                status.style.display = 'block';
                btn.innerText = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ üíæ";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>